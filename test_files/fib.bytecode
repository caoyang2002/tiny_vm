Push 0
Push 1
Push 1
-- [i, a, b]

Proc fibStep
    Get 1
    Get 1
    -- [a, b, b, a]
    Add
    -- [a, b, b + a]
    Get 1
    -- [a, b, b + a, b]
    Set 3
    Pop
    -- [b, b, b + a]
    Set 1
    Pop
    -- [b, b + a]
    Ret
End


label loop
    Call fibStep
    -- [i, a, b]
    Get 2
    Push 1
    -- [i, a, b, i, 1]
    Add
    -- [i, a, b, i + 1]
    Set 3
    Pop
    -- [i + 1, a, b]
    -- [i, a, b]
    Get 2
    Push 40
    Sub
    -- [i, a, b, i - 10]
JNE loop
Pop
-- [i, a, b]

Get 1
Print
Push 10
PrintC
